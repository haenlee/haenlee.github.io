---
title: "[Redis] Geo"
excerpt: "Redisì—ì„œ ìœ„ì¹˜ ì •ë³´ë¥¼ ì €ìž¥í•˜ëŠ” ë°©ë²•"

categories:
  -  Redis
tags:
  - [BackEnd, DB, Redis]

toc: true
toc_sticky: true
 
date: 2023-04-02
last_modified_at: 2023-04-02
---

# ðŸš€ Geo
---
RedisëŠ” ë©”ëª¨ë¦¬ ê¸°ë°˜ì˜ Key-Value ì €ìž¥ì†Œë¡œì„œ ë°ì´í„° ì²˜ë¦¬ ì†ë„ê°€ ë¹ ë¥´ê³  ë‹¤ì–‘í•œ ë°ì´í„° íƒ€ìž…ì„ ì§€ì›í•œë‹¤. 
RedisëŠ” ê³µê°„ ì •ë³´ë¥¼ ì €ìž¥í•˜ê³  ì²˜ë¦¬í•˜ëŠ” ê¸°ëŠ¥ì¸ Geo ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤. 
Geo ê¸°ëŠ¥ì€ ìœ„ì¹˜ ì •ë³´ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ì €ìž¥í•˜ê³  ì¡°íšŒí•  ìˆ˜ ìžˆëŠ” ë°©ë²•ì„ ì œê³µí•˜ì—¬ ìœ„ì¹˜ ê¸°ë°˜ ì„œë¹„ìŠ¤ë¥¼ êµ¬í˜„í•˜ëŠ” ë° ìœ ìš©í•˜ë‹¤.

## ðŸ“ íŠ¹ì§•
- ì§€ë¦¬ ì •ë³´ë¥¼ ì €ìž¥í•˜ê¸° ìœ„í•´ zset(zero sorted set) ë°ì´í„° íƒ€ìž…ì„ ì‚¬ìš©í•œë‹¤.  
  zsetì€ score(ì ìˆ˜)ì™€ value(ê°’)ì˜ ìŒìœ¼ë¡œ ì´ë£¨ì–´ì§„ ë°ì´í„° ì§‘í•©ì„ ì €ìž¥í•©ë‹ˆë‹¤.

- Geo ê¸°ëŠ¥ì€ ìœ„ë„ì™€ ê²½ë„ ì •ë³´ë¥¼ scoreë¡œ ì‚¬ìš©í•˜ì—¬ ìœ„ì¹˜ ì •ë³´ë¥¼ ì €ìž¥í•œë‹¤.  
  scoreëŠ” double í˜•ì‹ìœ¼ë¡œ ì €ìž¥ë˜ë©°, ìœ„ë„ì™€ ê²½ë„ë¥¼ í•©ì³ì„œ scoreë¡œ ì‚¬ìš©í•œë‹¤.

- Geo ê¸°ëŠ¥ì€ ìœ„ì¹˜ ì •ë³´ë¥¼ ì €ìž¥í•˜ê¸° ìœ„í•´ ìœ„ì„± ì¢Œí‘œê³„ì¸ WGS84 ì¢Œí‘œê³„ë¥¼ ì‚¬ìš©í•œë‹¤.  
  ì´ ì¢Œí‘œê³„ëŠ” ì§€êµ¬ë¥¼ ê°€ìž¥ ì •í™•í•˜ê²Œ í‘œí˜„í•˜ëŠ” ì¢Œí‘œê³„ ì¤‘ í•˜ë‚˜ì´ë‹¤.

- Geo ê¸°ëŠ¥ì€ ìœ„ì¹˜ ì •ë³´ë¥¼ ì €ìž¥í•  ë•Œ, íŠ¹ì • ìœ„ì¹˜ì˜ ë°˜ê²½ ë‚´ì— ìžˆëŠ” ë‹¤ë¥¸ ìœ„ì¹˜ë“¤ì„ ì¡°íšŒí•˜ëŠ” ê¸°ëŠ¥ë„ ì œê³µí•œë‹¤.  
  ì´ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ì—¬ ìœ„ì¹˜ ê¸°ë°˜ ì„œë¹„ìŠ¤ì—ì„œ íŠ¹ì • ì§€ì—­ ë‚´ì˜ ê°€ê²Œë‚˜ ì£¼ë³€ ì¹´íŽ˜ ë“±ì„ ì°¾ì„ ìˆ˜ ìžˆë‹¤.

## ðŸ“ Command
- **GEOADD key longitude latitude member [longitude latitude member ...]**  
  ìœ„ì¹˜ ì •ë³´ë¥¼ ì €ìž¥í•œë‹¤. keyëŠ” Redis zsetì˜ keyì´ë©°, longitudeì™€ latitudeëŠ” ìœ„ì¹˜ ì •ë³´ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ê°’ì´ë‹¤. memberëŠ” ìœ„ì¹˜ ì •ë³´ì™€ í•¨ê»˜ ì €ìž¥ë  ë°ì´í„°ì˜ ì´ë¦„ì´ë‹¤.  
  ì˜ˆë¥¼ ë“¤ì–´, `GEOADD stores 126.9807 37.5683 Seoul` ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ë©´, storesë¼ëŠ” zsetì— ìœ„ì¹˜ ì •ë³´ê°€ ì €ìž¥ëœë‹¤.

- **GEOPOS key member [member ...]**  
  íŠ¹ì • ìœ„ì¹˜ ì •ë³´ì˜ ì¢Œí‘œê°’ì„ ì¡°íšŒí•œë‹¤. keyëŠ” Redis zsetì˜ keyì´ë©°, memberëŠ” ì¡°íšŒí•˜ê³ ìž í•˜ëŠ” ìœ„ì¹˜ ì •ë³´ì˜ ì´ë¦„ì´ë‹¤.  
  ì˜ˆë¥¼ ë“¤ì–´, `GEOPOS stores Seoul` ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ë©´, stores zsetì— ì €ìž¥ëœ Seoulì˜ ì¢Œí‘œê°’ì„ ì¡°íšŒí•œë‹¤.

- **GEODIST key member1 member2 [unit]**  
  ë‘ ìœ„ì¹˜ ì •ë³´ ê°„ì˜ ê±°ë¦¬ë¥¼ ê³„ì‚°í•œë‹¤. keyëŠ” Redis zsetì˜ keyì´ë©°, member1ê³¼ member2ëŠ” ê±°ë¦¬ë¥¼ ê³„ì‚°í•˜ê³ ìž í•˜ëŠ” ìœ„ì¹˜ ì •ë³´ì´ë‹¤. 
  unitì€ ê±°ë¦¬ë¥¼ ê³„ì‚°í•  ë•Œ ì‚¬ìš©í•  ë‹¨ìœ„ë¥¼ ì§€ì •í•œë‹¤. ê¸°ë³¸ ë‹¨ìœ„ëŠ” meterì´ë‹¤.

- **GEORADIUS key longitude latitude radius unit [WITHCOORD] [WITHDIST] [WITHHASH] [COUNT count]**  
  íŠ¹ì • ë°˜ê²½ ë‚´ì— ìžˆëŠ” ë‹¤ë¥¸ ìœ„ì¹˜ë“¤ì„ ì¡°íšŒí•œë‹¤. keyëŠ” Redis zsetì˜ keyì´ë©°, longitudeì™€ latitudeëŠ” ì¤‘ì‹¬ì  ì¢Œí‘œë¥¼ ë‚˜íƒ€ë‚´ëŠ” ê°’ì´ë‹¤. radiusëŠ” ë°˜ê²½ì„ ë‚˜íƒ€ë‚´ë©°, unitì€ ë°˜ê²½ì˜ ë‹¨ìœ„ë¥¼ ì§€ì •í•œë‹¤.  WITHCOORD, WITHDIST, WITHHASH, COUNTëŠ” ì„ íƒì ì¸ íŒŒë¼ë¯¸í„°ì´ë©°, ê°ê° ì¡°íšŒ ê²°ê³¼ì— ì¢Œí‘œ, ê±°ë¦¬, í•´ì‹œê°’, ê²°ê³¼ ìˆ˜ë¥¼ í¬í•¨í• ì§€ ì—¬ë¶€ë¥¼ ë‚˜íƒ€ë‚¸ë‹¤.

- **GEORADIUSBYMEMBER key member radius unit [WITHCOORD] [WITHDIST] [WITHHASH] [COUNT count]**  
  íŠ¹ì • ìœ„ì¹˜ì—ì„œ ì§€ì •í•œ ë°˜ê²½ ë‚´ì— ìžˆëŠ” ë‹¤ë¥¸ ìœ„ì¹˜ë“¤ì„ ì¡°íšŒí•œë‹¤. keyëŠ” Redis zsetì˜ keyì´ë©°, memberëŠ” ì¤‘ì‹¬ì  ìœ„ì¹˜ ì •ë³´ì´ë‹¤. radiusëŠ” ë°˜ê²½ì„ ë‚˜íƒ€ë‚´ë©°, unitì€ ë°˜ê²½ì˜ ë‹¨ìœ„ë¥¼ ì§€ì •í•œë‹¤.  WITHCOORD, WITHDIST, WITHHASH, COUNTëŠ” ì„ íƒì ì¸ íŒŒë¼ë¯¸í„°ì´ë©°, ê°ê° ì¡°íšŒ ê²°ê³¼ì— ì¢Œí‘œ, ê±°ë¦¬, í•´ì‹œê°’, ê²°ê³¼ ìˆ˜ë¥¼ í¬í•¨í• ì§€ ì—¬ë¶€ë¥¼ ë‚˜íƒ€ë‚¸ë‹¤.

> [Redis Bootcamp for Beginners: Get Hands On with Redis.](https://www.udemy.com/course/redis-bootcamp-for-beginners/)  