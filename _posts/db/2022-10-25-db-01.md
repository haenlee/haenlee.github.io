---
title:  "[DB] statement vs. prepare statement"
excerpt: "" 

categories:
  - DB
tags:
  - [DB]

toc: true
toc_sticky: true
 
date: 2022-10-25
last_modified_at: 2022-10-25
---

# ğŸš€ (Java Sql) statement vs. prepare statement
---
ğŸ’¡ **statementì™€ prepare statementì˜ ì°¨ì´ì ì„ ì•Œê³  ìˆëŠ”ì§€?**   
{: .notice--danger}

--- 

- SQLë¬¸ì„ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” ê°ì²´
- ê°€ì¥ í° ì°¨ì´ì ì€ `ìºì‹œ ì‚¬ìš© ì—¬ë¶€`

### SQL ì‹¤í–‰ ë‹¨ê³„

1) ì¿¼ë¦¬ ë¬¸ì¥ ë¶„ì„  
2) ì»´íŒŒì¼  
3) ì‹¤í–‰  

## ğŸ“ Statement
```sql
String sqlstr = "SELECT name, memo FROM TABLE WHERE name =" + num
Statement stmt = conn.createStatement();
ResultSet rst = stmt.executeQuery(sqlstr);
```

- ì¿¼ë¦¬ë¬¸ì„ ìˆ˜í–‰í•  ë•Œë§ˆë‹¤ SQL ì‹¤í–‰ë‹¨ê³„ 1~3 ë‹¨ê³„ë¥¼ ê±°ì¹¨
- SQL ë¬¸ì„ ìˆ˜í–‰í•˜ëŠ” ê³¼ì •ì—ì„œÂ ë§¤ë²ˆ ì»´íŒŒì¼ì„ í•˜ê¸° ë•Œë¬¸ì— ì„±ëŠ¥ìƒ ì´ìŠˆ ë°œìƒ
- ì‹¤í–‰ë˜ëŠ” SQLë¬¸ì„ í™•ì¸ ê°€ëŠ¥

## ğŸ“ Prepared Statement
```sql
String sqlstr = "SELECT name, memo FROM TABLE WHERE num = ?"
PreparedStatement stmt = conn.preparedStatement();
stmt.setInt(1, num);
ResultSet rst = stmt.executeQuery(sqlstr);
```

- ì»´íŒŒì¼ì´ ë¯¸ë¦¬ ë˜ì–´ìˆê¸° ë•Œë¬¸ì— Statementì— ë¹„í•´ ì¢‹ì€ ì„±ëŠ¥
- íŠ¹ìˆ˜ë¬¸ìë¥¼ ìë™ìœ¼ë¡œ íŒŒì‹±í•´ì£¼ê¸° ë•Œë¬¸ì—Â **`SQL injection`** ê°™ì€ ê³µê²©ì„ ë§‰ì„ ìˆ˜ ìˆìŒ
- "?" ë¶€ë¶„ì—ë§Œ ë³€í™”ë¥¼ ì£¼ì–´ ì¿¼ë¦¬ë¬¸ì„ ìˆ˜í–‰í•˜ë¯€ë¡œÂ ì‹¤í–‰ë˜ëŠ” SQLë¬¸ì„ íŒŒì•…í•˜ê¸° ì–´ë ¤ì›€

## ğŸ“ Prepared Statementë¥¼ ì‚¬ìš©í•´ì•¼ í•˜ëŠ” ê²½ìš°
- ì‚¬ìš©ì ì…ë ¥ê°’ìœ¼ë¡œ ì¿¼ë¦¬ë¬¸ì„ ì‹¤í–‰í•˜ëŠ” ê²½ìš°
    - íŠ¹ìˆ˜ ê¸°í˜¸ê°€ ë“¤ì–´ì˜¤ë”ë¼ë„ ì•Œì•„ì„œ íŒŒì‹±í•´ì£¼ë¯€ë¡œ ì´ë¡œ ì¸í•œ ì—ëŸ¬ë¥¼ ë§‰ì„ ìˆ˜ ìˆìŒ
- ì¿¼ë¦¬ ë°˜ë³µ ìˆ˜í–‰ ì‘ì—…ì¼ ê²½ìš°

## ğŸ“ Statementì™€ PreparedStatementì˜ ì°¨ì´
Statementë¥¼ ì‚¬ìš©í•˜ë©´ ë§¤ë²ˆ ì¿¼ë¦¬ë¥¼ ìˆ˜í–‰í•  ë•Œë§ˆë‹¤ ê³„ì†ì ìœ¼ë¡œ ë‹¨ê³„ë¥¼ ê±°ì¹˜ë©´ì„œ ìˆ˜í–‰í•˜ì§€ë§Œ,Â 
PreparedStatementëŠ” ì²˜ìŒ í•œ ë²ˆë§Œ ì„¸ ë‹¨ê³„ë¥¼ ê±°ì¹œ í›„ ìºì‹œì— ë‹´ì•„ ì¬ì‚¬ìš©ì„ í•œë‹¤.Â 

ë§Œì•½ `ë™ì¼í•œ ì¿¼ë¦¬ë¥¼ ë°˜ë³µì ìœ¼ë¡œ ìˆ˜í–‰í•œë‹¤ë©´ PrepardStatementê°€ DBì— í›¨ì”¬ ì ì€ ë¶€í•˜ë¥¼ ì£¼ë©°, ì„±ëŠ¥ë„ ì¢‹ë‹¤.`